############################
#
# Crime and Punishment
#
############################

namespace = crime
# Rising Unemployment on X (Unemployment) - currently disabled
planet_event = {
	id = crime.1
	title = crime.1.name

	desc = {
		trigger = {
			if = {
				limit = { owner = { is_gestalt = no } }
				text = crime.1.desc
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = newline
					text = crime.1.desc.experimenters
				}
			}
			else_if = {
				limit = {
					owner = { is_hive_empire = yes }
				}
				text = crime.1.b.desc
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = newline
					text = crime.1.b.desc.experimenters
				}
			}
			else_if = {
				limit = {
					owner = { is_machine_empire = yes }
				}
				text = crime.1.c.desc
			}
		}
	}

	picture = {
		trigger = { owner = { is_gestalt = no } }
		picture = GFX_evt_dark_alley
	}
	picture = {
		trigger = {
			owner = { is_hive_empire = yes }
		}
		picture = GFX_evt_hive_mind
	}
	picture = {
		trigger = {
			owner = { is_machine_empire = yes }
		}
		picture = GFX_evt_glitchy_matrix
	}

	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		is_under_colonization = no
		is_colony = yes
		NOR = {
			owner = {
				is_ai = yes	# PATCH|OPT
			}
			pop_amount <= 500
			num_unemployed <= 500
			has_planet_flag = criminal_underworld_disappeared # Cooldown
			has_planet_flag = criminal_underworld_event_up
			has_planet_flag = shattered_frontier_planet
			has_modifier = unemployment_benefits
			has_modifier = activity_program
			has_modifier = standby_mode
			has_criminal_underworld_modifier = yes
			has_drone_deviancy_modifier = yes
			has_modifier = drone_corruption
			has_gang_wars_modifier = yes
			has_center_of_drug_trade_modifier = yes
			has_mob_rule_modifier = yes
		}
		OR = {
			AND = {
				owner = { is_gestalt = no }
				count_owned_pop_amount = {
					count > 500
					limit = {
						is_unemployed = yes
						NOR = {
							is_shackled_robot = yes
							is_enslaved = yes
							has_living_standard = { type = living_standard_utopian }
							has_living_standard = { type = living_standard_good }
							has_living_standard = { type = living_standard_shared_burden }
							has_living_standard = { type = living_standard_worker_ownership }
						}
					}
				}
			}
			AND = {
				owner = { is_gestalt = yes }
				count_owned_pop_amount = {
					count > 1000
					limit = {
						is_unemployed = yes
						NOT = { has_living_standard = { type = living_standard_organic_trophy } }
					}
				}
			}
		}
	}

	immediate = {
		set_planet_flag = criminal_underworld_event_up
	}

	weight_multiplier = {
		factor = 1
	}

	# Top Option
	option = {
		trigger = { owner = { is_gestalt = no } }
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.1.a.experimenters
				}
				else = {
					text = crime.1.a
				}
			}
		}
		add_modifier = { modifier = "unemployment_benefits" years = 10 }
		ai_chance = { factor = 2 }
	}
	option = {
		trigger = {
			owner = { is_hive_empire = yes }
		}
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.1.a2.experimenters
				}
				else = {
					text = crime.1.a2
				}
			}
		}
		add_modifier = { modifier = "activity_program" years = 10 }
		ai_chance = { factor = 2 }
	}
	option = {
		trigger = {
			owner = { is_machine_empire = yes }
		}
		name = crime.1.a3
		custom_tooltip = crime.1.a3.tooltip
		hidden_effect = {
			add_modifier = { modifier = "standby_mode" years = 10 }
		}
		ai_chance = { factor = 2 }
	}

	# Bottom Option
	option = {
		trigger = {
			owner = { is_twisted_experimenters_empire = yes }
		}
		name = {
			trigger = {
				if = {
					limit = { owner = { is_gestalt = no } }
					text = crime.1.b.experimenters
				}
				else_if = {
					limit = {
						owner = { is_hive_empire = yes }
					}
					text = crime.1.b2.experimenters
				}
			}
		}
		if = {
			limit = { owner = { is_gestalt = no } }
			add_modifier = { modifier = "criminal_underworld_experimenters" days = -1 }
		}
		else_if = {
			limit = {
				owner = { is_hive_empire = yes }
			}
			add_modifier = { modifier = "drone_deviancy_experimenters" days = -1 }
		}
	}
	option = {
		trigger = {
			owner = { is_gestalt = no is_twisted_experimenters_empire = no }
		}
		name = crime.1.b
		add_modifier = { modifier = criminal_underworld days = -1 }
	}
	option = {
		trigger = {
			owner = { is_hive_empire = yes is_twisted_experimenters_empire = no }
		}
		name = crime.1.b2
		add_modifier = { modifier = drone_deviancy days = -1 }
	}
	option = {
		trigger = {
			owner = { is_machine_empire = yes }
		}
		name = crime.1.b3
		add_modifier = { modifier = drone_corruption days = -1 }
	}

	after = {
		hidden_effect = {
			remove_planet_flag = criminal_underworld_event_up
		}
	}
}

# GENERIC
# Bribed Officials
planet_event = {
	id = crime.2
	title = crime.2.name
	desc = crime.2.desc
	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = bribed_officials years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.2.a.experimenters
				}
				else = {
					text = crime.2.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = bribed_officials years = 10 }
		}
	}
}

# Drug Trade
planet_event = {
	id = crime.3
	title = crime.3.name

	desc = {
		trigger = {
			text = crime.3.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.3.desc.experimenters
			}
		}
	}

	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = substance_abuse years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.3.a.experimenters
				}
				else = {
					text = crime.3.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = substance_abuse years = 10 }
		}
	}
}

# Gangs Clash
planet_event = {
	id = crime.4
	title = crime.4.name

	desc = {
		trigger = {
			text = crime.4.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.4.desc.experimenters
			}
		}
	}

	picture = GFX_evt_derelict_interior
	show_sound = event_ground_battle
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
	}

	immediate = {
		add_planet_devastation = 15
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.4.a.experimenters
				}
				else = {
					text = crime.4.a
				}
			}
		}
		tooltip = { add_planet_devastation = 15 }
	}
}

# Smugglers
planet_event = {
	id = crime.5
	title = crime.5.name

	desc = {
		trigger = {
			text = crime.5.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.5.desc.experimenters
			}
		}
	}

	picture = GFX_evt_ship_offloading_cargo
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = smuggler_activity years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.5.a.experimenters
				}
				else = {
					text = crime.5.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = smuggler_activity years = 10 }
		}
	}
}

# Crime Wave
planet_event = {
	id = crime.6
	title = crime.6.name

	desc = {
		trigger = {
			text = crime.6.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.6.desc.experimenters
			}
		}
	}

	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = crime_wave years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.6.a.experimenters
				}
				else = {
					text = crime.6.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = crime_wave years = 10 }
		}
	}
}

# Contraband Seized
planet_event = {
	id = crime.7
	title = crime.7.name

	desc = {
		trigger = {
			text = crime.7.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.7.desc.experimenters
			}
		}
	}

	picture = GFX_evt_ship_offloading_cargo
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
	}

	immediate = {
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
		random_list = {
			10 = { set_planet_flag = contraband_alloys }
			10 = { set_planet_flag = contraband_consumer_goods }
			10 = {
				set_planet_flag = contraband_volatile_motes
				modifier = {
					factor = 0
					owner = {
						NOT = { has_technology = "tech_mine_volatile_motes" }
					}
				}
			}
			10 = {
				set_planet_flag = contraband_exotic_gases
				modifier = {
					factor = 0
					owner = {
						NOT = { has_technology = "tech_mine_exotic_gases" }
					}
				}
			}
			10 = {
				set_planet_flag = contraband_rare_crystals
				modifier = {
					factor = 0
					owner = {
						NOT = { has_technology = "tech_mine_rare_crystals" }
					}
				}
			}
			10 = {
				set_planet_flag = contraband_living_metal
				modifier = {
					factor = 0
					owner = {
						NOT = { has_technology = "tech_mine_living_metal" }
					}
				}
			}
			10 = {
				set_planet_flag = contraband_zro
				modifier = {
					factor = 0
					owner = {
						NOT = { has_technology = "tech_mine_zro" }
					}
				}
			}
			10 = {
				set_planet_flag = contraband_dark_matter
				modifier = {
					factor = 0
					owner = {
						NOT = { has_technology = "tech_mine_dark_matter" }
					}
				}
			}
		}
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.7.a.experimenters
				}
				else = {
					text = crime.7.a
				}
			}
		}
		if = {
			limit = { has_planet_flag = contraband_alloys }
			owner = { add_resource = { alloys = 100 } }
			break = yes
		}
		if = {
			limit = { has_planet_flag = contraband_consumer_goods }
			owner = {
				add_resource = { consumer_goods = 30 }
			}
			break = yes
		}
		if = {
			limit = { has_planet_flag = contraband_volatile_motes }
			owner = {
				add_resource = { volatile_motes = 20 }
			}
			break = yes
		}
		if = {
			limit = { has_planet_flag = contraband_exotic_gases }
			owner = {
				add_resource = { exotic_gases = 20 }
			}
			break = yes
		}
		if = {
			limit = { has_planet_flag = contraband_rare_crystals }
			owner = {
				add_resource = { rare_crystals = 20 }
			}
			break = yes
		}
		if = {
			limit = { has_planet_flag = contraband_living_metal }
			owner = {
				add_resource = { sr_living_metal = 10 }
			}
			break = yes
		}
		if = {
			limit = { has_planet_flag = contraband_zro }
			owner = { add_resource = { sr_zro = 10 } }
			break = yes
		}
		if = {
			limit = { has_planet_flag = contraband_dark_matter }
			owner = {
				add_resource = { sr_dark_matter = 10 }
			}
			break = yes
		}
	}

	after = {
		hidden_effect = {
			remove_planet_flag = contraband_alloys
			remove_planet_flag = contraband_consumer_goods
			remove_planet_flag = contraband_volatile_motes
			remove_planet_flag = contraband_exotic_gases
			remove_planet_flag = contraband_rare_crystals
			remove_planet_flag = contraband_living_metal
			remove_planet_flag = contraband_zro
			remove_planet_flag = contraband_dark_matter
		}
	}
}

# Crime Boss Arrested
planet_event = {
	id = crime.8
	title = crime.8.name

	desc = {
		trigger = {
			text = crime.8.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.8.desc.experimenters
			}
		}
	}

	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
	}

	immediate = {
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
		add_modifier = { modifier = crime_boss_arrested years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.8.a.experimenters
				}
				else = {
					text = crime.8.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = crime_boss_arrested years = 10 }
		}
	}
}

# Criminal Underworld Appears (High Crime)
planet_event = {
	id = crime.40
	title = crime.40.name

	desc = {
		trigger = {
			if = {
				limit = { owner = { is_gestalt = no } }
				text = crime.40.desc
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = newline
					text = crime.40.desc.experimenters
				}
			}
			else_if = {
				limit = {
					owner = { is_hive_empire = yes }
				}
				text = crime.40.b.desc
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = newline
					text = crime.40.b.desc.experimenters
				}
			}
			else_if = {
				limit = {
					owner = { is_machine_empire = yes }
				}
				text = crime.40.c.desc
			}
		}
	}

	picture = {
		trigger = { owner = { is_gestalt = no } }
		picture = GFX_evt_dark_alley
	}
	picture = {
		trigger = {
			owner = { is_hive_empire = yes }
		}
		picture = GFX_evt_hive_mind
	}
	picture = {
		trigger = {
			owner = { is_machine_empire = yes }
		}
		picture = GFX_evt_glitchy_matrix
	}

	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		NOR = {
			pop_amount < 1
			owner = {
				is_ai = yes	# PATCH|OPT
			}
			planet_crime < 30
			has_planet_flag = criminal_underworld_event_up
			has_modifier = unemployment_benefits
			has_modifier = activity_program
			has_modifier = standby_mode
			has_criminal_underworld_modifier = yes
			has_drone_deviancy_modifier = yes
			has_modifier = drone_corruption
			has_gang_wars_modifier = yes
			has_center_of_drug_trade_modifier = yes
			has_mob_rule_modifier = yes
			has_planet_flag = criminal_underworld_disappeared
		}
	}

	weight_multiplier = {
		factor = 1
		modifier = { factor = 2.0 planet_crime >= 50 }
		modifier = { factor = 2.0 planet_crime >= 70 }
		modifier = { factor = 2.0 planet_crime >= 90 }
	}

	immediate = {
		set_planet_flag = criminal_underworld_event_up
		set_timed_planet_flag = { flag = criminal_underworld_appeared years = 10 }
		if = {
			limit = { owner = { is_gestalt = no } }
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				add_modifier = { modifier = "criminal_underworld_experimenters" days = -1 }
			}
			else = {
				add_modifier = { modifier = "criminal_underworld" days = -1 }
			}
			break = yes
		}
		if = {
			limit = {
				owner = { is_hive_empire = yes }
			}
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				add_modifier = { modifier = "drone_deviancy_experimenters" days = -1 }
			}
			else = {
				add_modifier = { modifier = "drone_deviancy" days = -1 }
			}
			break = yes
		}
		if = {
			limit = {
				owner = { is_machine_empire = yes }
			}
			add_modifier = { modifier = "drone_corruption" days = -1 }
		}
	}

	option = {
		name = crime.40.a
		trigger = {
			owner = {
				NOR = {
					is_gestalt = yes
					is_twisted_experimenters_empire = yes
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = "criminal_underworld" days = -1 }
		}
	}
	option = {
		name = crime.40.b
		trigger = {
			owner = { is_hive_empire = yes is_twisted_experimenters_empire = no }
		}
		tooltip = {
			add_modifier = { modifier = "drone_deviancy" days = -1 }
		}
	}
	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_hive_empire = yes }
					}
					text = crime.40.b.experimenters
				}
				else = {
					text = crime.40.a.experimenters
				}
			}
		}
		trigger = {
			owner = { is_twisted_experimenters_empire = yes }
		}
		tooltip = {
			if = {
				limit = {
					owner = { is_hive_empire = yes }
				}
				add_modifier = { modifier = "drone_deviancy_experimenters" days = -1 }
			}
			else = {
				add_modifier = { modifier = "criminal_underworld_experimenters" days = -1 }
			}
		}
	}
	option = {
		name = crime.40.c
		trigger = {
			owner = { is_machine_empire = yes }
		}
		tooltip = {
			add_modifier = { modifier = "drone_corruption" days = -1 }
		}
	}

	after = {
		hidden_effect = {
			remove_planet_flag = criminal_underworld_event_up
		}
	}
}

# Criminal Underworld Disappears (Low Crime)
planet_event = {
	id = crime.41
	title = crime.41.name

	desc = {
		trigger = {
			if = {
				limit = { owner = { is_gestalt = no } }
				text = crime.41.desc
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = newline
					text = crime.41.desc.experimenters
				}
			}
			else_if = {
				limit = {
					owner = { is_hive_empire = yes }
				}
				text = crime.41.b.desc
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = newline
					text = crime.41.b.desc.experimenters
				}
			}
			else_if = {
				limit = {
					owner = { is_machine_empire = yes }
				}
				text = crime.41.c.desc
			}
		}
	}

	picture = {
		trigger = { owner = { is_gestalt = no } }
		picture = GFX_evt_dark_alley
	}
	picture = {
		trigger = {
			owner = { is_hive_empire = yes }
		}
		picture = GFX_evt_hive_mind
	}
	picture = {
		trigger = {
			owner = { is_machine_empire = yes }
		}
		picture = GFX_evt_circuitry_modification
	}

	show_sound = event_cityscape
	location = root
	is_triggered_only = yes
	auto_opens = no
	notification_event_icon = "GFX_message_low_crime"

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_owner = yes
		owner = {
			NOR = {
				is_ai = yes	# PATCH|OPT
				has_country_flag = order_restored
			}
		}
		OR = {
			has_criminal_underworld_modifier = yes
			has_drone_deviancy_modifier = yes
			has_modifier = drone_corruption
			has_gang_wars_modifier = yes
			has_center_of_drug_trade_modifier = yes
			has_mob_rule_modifier = yes
		}
		NOR = {
			has_planet_flag = criminal_underworld_appeared
			pop_amount < 1
			planet_crime > 10
		}
	}

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 2.0
			exists = planet
			planet = {
				OR = {
					num_assigned_jobs = { job = enforcer value > 200 }
					num_assigned_jobs = { job = educator value > 200 }
					num_assigned_jobs = { job = coordinator value > 200 }
					num_assigned_jobs = { job = synapse_drone value > 200 }
					num_assigned_jobs = { job = patrol_drone value > 200 }
				}
			}
		}
		modifier = {
			factor = 2.0
			exists = planet
			planet = {
				OR = {
					num_assigned_jobs = { job = enforcer value > 300 }
					num_assigned_jobs = { job = educator value > 300 }
					num_assigned_jobs = { job = coordinator value > 300 }
					num_assigned_jobs = { job = synapse_drone value > 300 }
					num_assigned_jobs = { job = patrol_drone value > 300 }
				}
			}
		}
		modifier = {
			factor = 2.0
			exists = planet
			planet = {
				OR = {
					num_assigned_jobs = { job = enforcer value > 400 }
					num_assigned_jobs = { job = educator value > 400 }
					num_assigned_jobs = { job = coordinator value > 400 }
					num_assigned_jobs = { job = synapse_drone value > 400 }
					num_assigned_jobs = { job = patrol_drone value > 400 }
				}
			}
		}
	}

	immediate = {
		owner = { set_country_flag = order_restored }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.41.a.experimenters
				}
				else = {
					text = crime.41.a
				}
			}
		}
		if = {
			limit = { has_criminal_underworld_modifier = yes }
			remove_modifier = criminal_underworld
			remove_modifier = criminal_underworld_experimenters
		}
		if = {
			limit = { has_gang_wars_modifier = yes }
			remove_modifier = gang_wars
			remove_modifier = gang_wars_experimenters
		}
		if = {
			limit = { has_center_of_drug_trade_modifier = yes }
			remove_modifier = center_of_drug_trade
			remove_modifier = center_of_drug_trade_experimenters
		}
		if = {
			limit = { has_mob_rule_modifier = yes }
			remove_modifier = mob_rule
			remove_modifier = mob_rule_experimenters
		}
		if = {
			limit = { has_modifier = bribed_officials }
			remove_modifier = bribed_officials
		}
		if = {
			limit = { has_modifier = substance_abuse }
			remove_modifier = substance_abuse
		}
		if = {
			limit = { has_modifier = smuggler_activity }
			remove_modifier = smuggler_activity
		}
		if = {
			limit = { has_modifier = crime_wave }
			remove_modifier = crime_wave
		}
		if = {
			limit = { has_modifier = cartel_war }
			remove_modifier = cartel_war
		}
		if = {
			limit = { has_modifier = protection_racket }
			remove_modifier = protection_racket
		}
		if = {
			limit = { has_modifier = corrupt_administration }
			remove_modifier = corrupt_administration
		}
		if = {
			limit = { has_modifier = trade_pilfering }
			remove_modifier = trade_pilfering
		}
		# Hive Minds
		if = {
			limit = { has_drone_deviancy_modifier = yes }
			remove_modifier = drone_deviancy
			remove_modifier = drone_deviancy_experimenters
		}
		if = {
			limit = { has_modifier = deviant_interference }
			remove_modifier = deviant_interference
		}
		# Machine Intelligences
		if = {
			limit = { has_modifier = drone_corruption }
			remove_modifier = drone_corruption
		}
		if = {
			limit = { has_modifier = drone_signal_interference }
			remove_modifier = drone_signal_interference
		}
		hidden_effect = {
			set_timed_planet_flag = { flag = criminal_underworld_disappeared years = 10 }
		}
	}

	after = {
		owner = { remove_country_flag = order_restored }
	}
}

# Crime Gatekeeper
event = {
	id = crime.50
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_playable_country = {
			limit = {
				is_gestalt = no
				any_owned_planet = {
					OR = {
						has_criminal_underworld_modifier = yes
						has_gang_wars_modifier = yes
						has_center_of_drug_trade_modifier = yes
						has_mob_rule_modifier = yes
					}
					NOR = {
						has_planet_flag = planet_crime_flag
						has_modifier = crime_lord_deal
					}
				}
			}
			country_event = { id = crime.51 }
		}
		every_playable_country = {
			limit = {
				is_hive_empire = yes
				any_owned_planet = { has_drone_deviancy_modifier = yes }
			}
			country_event = { id = crime.52 }
		}
		every_playable_country = {
			limit = {
				is_machine_empire = yes
				any_owned_planet = { has_modifier = drone_corruption }
			}
			country_event = { id = crime.53 }
		}
	}
}

# Crime Gatekeeper (Normies)
country_event = {
	id = crime.51
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_owned_planet = {
			limit = {
				OR = {
					has_criminal_underworld_modifier = yes
					has_gang_wars_modifier = yes
					has_center_of_drug_trade_modifier = yes
					has_mob_rule_modifier = yes
				}
				NOR = {
					has_planet_flag = planet_crime_flag
					has_modifier = crime_lord_deal
				}
			}
			random_list = {
				300 = {  }
				10 = {
					modifier = { factor = 0 has_criminal_underworld_modifier = no }
					planet_event = { id = crime.2 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_criminal_underworld_modifier = no }
					planet_event = { id = crime.3 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_criminal_underworld_modifier = no }
					planet_event = { id = crime.4 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_criminal_underworld_modifier = no }
					planet_event = { id = crime.5 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_criminal_underworld_modifier = no }
					planet_event = { id = crime.6 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_criminal_underworld_modifier = no }
					planet_event = { id = crime.7 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_criminal_underworld_modifier = no }
					planet_event = { id = crime.8 days = 1 random = 300 }
				}
				10 = { # Gang Wars
					modifier = {
						factor = 0
						has_criminal_underworld_modifier = no
						planet_crime < 50
					}
					planet_event = { id = crime.100 days = 1 random = 300 }
				}
				10 = { # Center of Drug Trade
					modifier = {
						factor = 0
						has_criminal_underworld_modifier = no
						planet_crime < 50
					}
					planet_event = { id = crime.200 days = 1 random = 300 }
				}
				10 = { # Mob Rule
					modifier = {
						factor = 0
						has_criminal_underworld_modifier = no
						planet_crime < 50
					}
					planet_event = { id = crime.300 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_gang_wars_modifier = no }
					planet_event = { id = crime.101 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_gang_wars_modifier = no }
					planet_event = { id = crime.102 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_gang_wars_modifier = no }
					planet_event = { id = crime.103 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_gang_wars_modifier = no }
					planet_event = { id = crime.104 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_center_of_drug_trade_modifier = no }
					planet_event = { id = crime.201 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_center_of_drug_trade_modifier = no }
					planet_event = { id = crime.202 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_center_of_drug_trade_modifier = no }
					planet_event = { id = crime.203 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_center_of_drug_trade_modifier = no }
					planet_event = { id = crime.204 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_mob_rule_modifier = no }
					planet_event = { id = crime.301 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_mob_rule_modifier = no }
					planet_event = { id = crime.302 days = 1 random = 300 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							NAND = {
								exists = leader
								has_mob_rule_modifier = yes
							}
							owner = { has_country_flag = gangsters_killed_governor }
							AND = {
								exists = leader
								leader = {
									OR = {
										is_leader_tier = leader_tier_legendary
										has_any_chosen_one_leader_trait = yes
									}
								}
							}
						}
					}
					planet_event = { id = crime.303 days = 1 random = 300 }
				}
				10 = {
					modifier = { factor = 0 has_mob_rule_modifier = no }
					planet_event = { id = crime.304 days = 1 random = 300 }
				}
			}
		}
	}
}

# Crime Gatekeeper (Hive Minds)
country_event = {
	id = crime.52
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_owned_planet = {
			limit = {
				has_drone_deviancy_modifier = yes
				NOT = { has_planet_flag = planet_crime_flag }
			}
			random_list = {
				200 = {  }
				10 = { planet_event = { id = crime.500 days = 1 random = 300 } }
				10 = { planet_event = { id = crime.501 days = 1 random = 300 } }
				5 = { planet_event = { id = crime.502 days = 1 random = 300 } }
			}
		}
	}
}

# Crime Gatekeeper (Machine Intelligences)
country_event = {
	id = crime.53
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_owned_planet = {
			limit = {
				has_modifier = drone_corruption
				NOT = { has_planet_flag = planet_crime_flag }
			}
			random_list = {
				200 = {  }
				10 = { planet_event = { id = crime.550 days = 1 random = 300 } }
				10 = { planet_event = { id = crime.551 days = 1 random = 300 } }
				5 = { planet_event = { id = crime.552 days = 1 random = 300 } }
			}
		}
	}
}

# Gang Wars
planet_event = {
	id = crime.100
	title = crime.100.name

	desc = {
		trigger = {
			text = crime.100.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.100.desc.experimenters
			}
		}
	}

	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
		has_gang_wars_modifier = no
	}

	immediate = {
		remove_modifier = criminal_underworld
		remove_modifier = criminal_underworld_experimenters
		if = {
			limit = {
				owner = { is_twisted_experimenters_empire = yes }
			}
			add_modifier = { modifier = "gang_wars_experimenters" days = -1 }
		}
		else = {
			add_modifier = { modifier = "gang_wars" days = -1 }
		}
	}

	option = {
		name = crime.100.a
		tooltip = {
			if = {
				limit = { has_modifier = criminal_underworld }
				remove_modifier = criminal_underworld
			}
			if = {
				limit = { has_modifier = criminal_underworld_experimenters }
				remove_modifier = criminal_underworld_experimenters
			}
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				add_modifier = { modifier = "gang_wars_experimenters" days = -1 }
			}
			else = {
				add_modifier = { modifier = "gang_wars" days = -1 }
			}
		}
	}
}

# Gangs Ambush Enforcers
planet_event = {
	id = crime.101
	title = crime.101.name

	desc = {
		trigger = {
			text = crime.101.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.101.desc.experimenters
			}
		}
	}

	picture = GFX_evt_derelict_interior
	show_sound = event_ground_battle
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_gang_wars_modifier = yes
		any_owned_pop_job = { has_job_type = enforcer }
	}

	immediate = {
		random_owned_pop_job = {
			limit = { has_job_type = enforcer }
			kill_assigned_pop_amount = { percentage = 1 }
		}
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.101.a.experimenters
				}
				else = {
					text = crime.101.a
				}
			}
		}
		custom_tooltip = crime.101.tooltip
	}
}

# Gang Warfare Spreads into Space
planet_event = {
	id = crime.102
	title = crime.102.name

	desc = {
		trigger = {
			text = crime.102.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.102.desc.experimenters
			}
		}
	}

	picture = GFX_evt_pirates_attacking_cargo
	show_sound = event_space_battle
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_owner = yes
		owner = {
			has_country_flag = birth_of_piracy
			NOT = { has_country_flag = crime_pirates_spawned }
		}
		has_gang_wars_modifier = yes
	}

	immediate = {
		owner = {
			set_timed_country_flag = { flag = crime_pirates_spawned years = 10 }
			owner_species = { save_event_target_as = owner_species }
		}
		solar_system = {
			save_event_target_as = pirate_system
			create_normal_pirate_country = yes
			create_pirate_fleet = yes
		}
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.102.a.experimenters
				}
				else = {
					text = crime.102.a
				}
			}
		}
		custom_tooltip = crime.102.tooltip
	}
}

# Pitched Battle
planet_event = {
	id = crime.103
	title = crime.103.name

	desc = {
		trigger = {
			text = crime.103.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.103.desc.experimenters
			}
		}
	}

	picture = GFX_evt_derelict_interior
	show_sound = event_ground_battle
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_gang_wars_modifier = yes
	}

	immediate = {
		while = { # Vfix minor opt
			count = 3
			random_owned_pop_group = { kill_single_pop = yes }
		}
		add_planet_devastation = 15
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.103.a.experimenters
				}
				else = {
					text = crime.103.a
				}
			}
		}
		custom_tooltip = crime.103.tooltip
		tooltip = { add_planet_devastation = 15 }
	}
}

# Traders Steer Clear
planet_event = {
	id = crime.104
	title = crime.104.name

	desc = {
		trigger = {
			text = crime.104.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.104.desc.experimenters
			}
		}
	}

	picture = GFX_evt_cargoship_caravan
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_gang_wars_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = "travel_advisory" years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.104.a.experimenters
				}
				else = {
					text = crime.104.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = "travel_advisory" years = 10 }
		}
	}
}

# Center of Drug Trade
planet_event = {
	id = crime.200
	title = crime.200.name

	desc = {
		trigger = {
			text = crime.200.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.200.desc.experimenters
			}
		}
	}

	picture = GFX_evt_smugglers_in_bar
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
		has_center_of_drug_trade_modifier = no
	}

	immediate = {
		remove_modifier = criminal_underworld
		remove_modifier = criminal_underworld_experimenters
		if = {
			limit = {
				owner = { is_twisted_experimenters_empire = yes }
			}
			add_modifier = { modifier = "center_of_drug_trade_experimenters" days = -1 }
		}
		else = {
			add_modifier = { modifier = "center_of_drug_trade" days = -1 }
		}
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.200.a.experimenters
				}
				else = {
					text = crime.200.a
				}
			}
		}
		tooltip = {
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				add_modifier = { modifier = "center_of_drug_trade_experimenters" days = -1 }
			}
			else = {
				add_modifier = { modifier = "center_of_drug_trade" days = -1 }
			}
		}
	}
}

# Drug Related Deaths
planet_event = {
	id = crime.201
	title = crime.201.name

	desc = {
		trigger = {
			text = crime.201.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.201.desc.experimenters
			}
		}
	}

	picture = GFX_evt_disease_outbreak
	show_sound = event_life_support_fail
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_center_of_drug_trade_modifier = yes
		pop_amount > 400
	}

	immediate = {
		while = {
			count = 4
			random_owned_pop_group = { kill_single_pop = yes }
		}
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.201.a.experimenters
				}
				else = {
					text = crime.201.a
				}
			}
		}
		custom_tooltip = crime.201.tooltip
	}
}

# Drug Cartels Clash
planet_event = {
	id = crime.202
	title = crime.202.name

	desc = {
		trigger = {
			text = crime.202.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.202.desc.experimenters
			}
		}
	}

	picture = GFX_evt_derelict_interior
	show_sound = event_ground_battle
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_center_of_drug_trade_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = "cartel_war" years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = crime.203.a
		tooltip = {
			add_modifier = { modifier = "cartel_war" years = 10 }
		}
	}
}

# Drug Smuggler Crash
planet_event = {
	id = crime.203
	title = crime.203.name

	desc = {
		trigger = {
			text = crime.203.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.203.desc.experimenters
			}
		}
	}

	picture = GFX_evt_nuclear_explosion
	show_sound = event_super_explosion
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_center_of_drug_trade_modifier = yes
	}

	immediate = {
		while = { # Vfix minor opt
			count = 3
			random_owned_pop_group = { kill_single_pop = yes }
		}
		add_planet_devastation = 15
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.203.a.experimenters
				}
				else = {
					text = crime.203.a
				}
			}
		}
		custom_tooltip = crime.103.tooltip
		tooltip = { add_planet_devastation = 15 }
	}
}

# Drug Trade Continues
planet_event = {
	id = crime.204
	title = crime.204.name

	desc = {
		trigger = {
			text = crime.204.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.204.desc.experimenters
			}
		}
	}

	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_center_of_drug_trade_modifier = yes
		owner = {
			has_country_resource = { type = exotic_gases amount > 10 }
		}
	}

	immediate = {
		owner = {
			add_resource = { exotic_gases = -10 }
		}
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.204.a.experimenters
				}
				else = {
					text = crime.204.a
				}
			}
		}
		tooltip = {
			owner = {
				add_resource = { exotic_gases = -10 }
			}
		}
	}
}

# Mob Rule
planet_event = {
	id = crime.300
	title = crime.300.name

	desc = {
		trigger = {
			text = crime.300.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.300.desc.experimenters
			}
		}
	}

	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_criminal_underworld_modifier = yes
		has_mob_rule_modifier = no
	}

	immediate = {
		remove_modifier = criminal_underworld
		remove_modifier = criminal_underworld_experimenters
		if = {
			limit = {
				owner = { is_twisted_experimenters_empire = yes }
			}
			add_modifier = { modifier = "mob_rule_experimenters" days = -1 }
		}
		else = {
			add_modifier = { modifier = "mob_rule" days = -1 }
		}
	}

	option = {
		name = crime.300.a
		tooltip = {
			if = {
				limit = { has_modifier = criminal_underworld }
				remove_modifier = criminal_underworld
			}
			if = {
				limit = { has_modifier = criminal_underworld_experimenters }
				remove_modifier = criminal_underworld_experimenters
			}
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				add_modifier = { modifier = "mob_rule_experimenters" days = -1 }
			}
			else = {
				add_modifier = { modifier = "mob_rule" days = -1 }
			}
		}
	}
}

# Protection Racket
planet_event = {
	id = crime.301
	title = crime.301.name

	desc = {
		trigger = {
			text = crime.301.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.301.desc.experimenters
			}
		}
	}

	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_mob_rule_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = "protection_racket" years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.301.a.experimenters
				}
				else = {
					text = crime.301.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = "protection_racket" years = 10 }
		}
	}
}

# Corrupt Administration
planet_event = {
	id = crime.302
	title = crime.302.name

	desc = {
		trigger = {
			text = crime.302.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.302.desc.experimenters
			}
		}
	}

	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_mob_rule_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = "corrupt_administration" years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = crime.302.a
		tooltip = {
			add_modifier = { modifier = "corrupt_administration" years = 10 }
		}
	}
	option = {
		name = crime.302.b
		hidden_effect = {
			remove_modifier = corrupt_administration
			remove_planet_flag = planet_crime_flag
			add_modifier = { modifier = "corrupt_administration" years = 5 }
			set_timed_planet_flag = { flag = planet_crime_flag years = 5 }
		}
		inline_script = {
			script = events/dynamic_resource_cost
			RESOURCE = unity
			COST1 = 50
			INCOME1 = 1
			COST2 = 200
			INCOME2 = 10
			COST3 = 400
			INCOME3 = 20
			COST4 = 600
			INCOME4 = 40
			COST5 = 1200
			INCOME5 = 100
			OWNER_SCOPE = planet_owner
		}
		tooltip = {
			add_modifier = { modifier = "corrupt_administration" years = 5 }
		}
	}
	option = {
		name = crime.302.c
		trigger = {
			owner = { has_ethic = ethic_pacifist }
		}
		hidden_effect = {
			remove_modifier = corrupt_administration
			remove_planet_flag = planet_crime_flag
		}
		inline_script = {
			script = events/dynamic_resource_cost
			RESOURCE = energy
			COST1 = 100
			INCOME1 = 10
			COST2 = 500
			INCOME2 = 50
			COST3 = 1000
			INCOME3 = 100
			COST4 = 2000
			INCOME4 = 200
			COST5 = 5000
			INCOME5 = 500
			OWNER_SCOPE = planet_owner
		}
		tooltip = {
			add_modifier = { modifier = "corrupt_administration" years = 1 }
		}
	}
}

# Gangsters Assassinate Governor
planet_event = {
	id = crime.303
	title = crime.303.name
	desc = crime.303.desc
	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_mob_rule_modifier = yes
		exists = leader
	}

	immediate = {
		leader = { save_event_target_as = governor_target }
		owner = { set_country_flag = gangsters_killed_governor }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.303.a.experimenters
				}
				else = {
					text = crime.303.a
				}
			}
		}
		leader = {
			kill_leader = { show_notification = no }
		}
	}
}

# Gangsters Take Control of Trade
planet_event = {
	id = crime.304
	title = crime.304.name

	desc = {
		trigger = {
			text = crime.304.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.304.desc.experimenters
			}
		}
	}

	picture = GFX_evt_ship_offloading_cargo
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_mob_rule_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = "trade_pilfering" years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.304.a.experimenters
				}
				else = {
					text = crime.304.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = "trade_pilfering" years = 10 }
		}
	}
}

### Hive Mind Crime events
# Stampeding Deviant Drones
planet_event = {
	id = crime.500
	title = crime.500.name
	desc = crime.500.desc
	picture = GFX_evt_burning_settlement
	show_sound = event_planetary_riot
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_drone_deviancy_modifier = yes
	}

	immediate = {
		add_planet_devastation = 15
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = crime.500.a
		tooltip = { add_planet_devastation = 15 }
	}
}

# Deviant Drone Interference
planet_event = {
	id = crime.501
	title = crime.501.name

	desc = {
		trigger = {
			text = crime.501.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.501.desc.experimenters
			}
		}
	}

	picture = GFX_evt_hive_mind
	show_sound = event_administrative_work
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_drone_deviancy_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = "deviant_interference" years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.501.a.experimenters
				}
				else = {
					text = crime.501.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = "deviant_interference" years = 10 }
		}
	}
}

# Deviant Drone Ringleader Killed
planet_event = {
	id = crime.502
	title = crime.502.name

	desc = {
		trigger = {
			text = crime.502.desc
			if = {
				limit = {
					owner = { is_twisted_experimenters_empire = yes }
				}
				text = newline
				text = crime.502.desc.experimenters
			}
		}
	}

	picture = GFX_evt_hive_mind
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_drone_deviancy_modifier = yes
	}

	immediate = {
		add_modifier = { modifier = "ringleader_killed" years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = {
			trigger = {
				if = {
					limit = {
						owner = { is_twisted_experimenters_empire = yes }
					}
					text = crime.502.a.experimenters
				}
				else = {
					text = crime.502.a
				}
			}
		}
		tooltip = {
			add_modifier = { modifier = "ringleader_killed" years = 10 }
		}
	}
}

### Machine Intelligence Crime events
# Drone Unit Rampage
planet_event = {
	id = crime.550
	title = crime.550.name
	desc = crime.550.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_ground_battle
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_modifier = drone_corruption
	}

	immediate = {
		add_planet_devastation = 15
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = crime.550.a
		tooltip = { add_planet_devastation = 15 }
	}
}

# Drone Unit Signal Interference
planet_event = {
	id = crime.551
	title = crime.551.name
	desc = crime.551.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_alien_signal
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_modifier = drone_corruption
	}

	immediate = {
		add_modifier = { modifier = "drone_signal_interference" years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = crime.550.a
		tooltip = {
			add_modifier = { modifier = "drone_signal_interference" years = 10 }
		}
	}
}

# Virus Terminates Deviant Network
planet_event = {
	id = crime.552
	title = crime.552.name
	desc = crime.552.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_administrative_work
	location = root
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_modifier = drone_corruption
	}

	immediate = {
		add_modifier = { modifier = "corrupt_network_terminated" years = 10 }
		set_timed_planet_flag = { flag = planet_crime_flag years = 10 }
	}

	option = {
		name = crime.552.a
		tooltip = {
			add_modifier = { modifier = "corrupt_network_terminated" years = 10 }
		}
	}
}

# Criminal Branch Office Closes
event = {
	id = crime.1000
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_playable_country = {
			any_owned_planet = {
				has_branch_office = yes
				branch_office_owner = {
					is_criminal_syndicate = yes
					NOR = {
						has_commercial_pact = prev.owner
						has_country_flag = criminal_branch_closed_cooldown
					}
				}
				planet_crime < 1
			}
		}
	}

	immediate = {
		random_list = {
			19 = {  }
			1 = {
				random_playable_country = {
					limit = {
						any_owned_planet = {
							has_branch_office = yes
							branch_office_owner = {
								is_criminal_syndicate = yes
								NOR = {
									has_commercial_pact = prev.owner
									has_country_flag = criminal_branch_closed_cooldown
								}
							}
							planet_crime < 1
						}
					}
					random_owned_planet = {
						limit = {
							has_branch_office = yes
							branch_office_owner = {
								is_criminal_syndicate = yes
								NOR = {
									has_commercial_pact = prev.owner
									has_country_flag = criminal_branch_closed_cooldown
								}
							}
							planet_crime < 1
						}
						branch_office_owner = { save_event_target_as = office_owner }
						planet_event = { id = crime.1001 days = 360 random = 40 }
					}
				}
			}
		}
	}
}

# Criminal Branch Office Closes (Planet Owner)
planet_event = {
	id = crime.1001
	title = crime.1001.name
	desc = crime.1001.desc
	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = root
	is_triggered_only = yes

	trigger = {
		planet_crime < 1
		has_branch_office = yes
		branch_office_owner = {
			is_criminal_syndicate = yes
			NOT = { has_country_flag = criminal_branch_closed_cooldown }
		}
	}

	immediate = {
		# 10 year cooldown
		branch_office_owner = {
			set_timed_country_flag = { flag = criminal_branch_closed_cooldown years = 10 }
		}
	}

	option = {
		name = crime.1001.a
		close_branch_office = yes
		hidden_effect = {
			set_timed_planet_flag = {
				flag = criminal_branch_closed_cooldown_planet@event_target:office_owner
				days = 3600
			}
			event_target:office_owner = {
				country_event = { id = crime.1002 }
			}
		}
	}
}

# Criminal Branch Office Closes (Office Owner)
country_event = {
	id = crime.1002
	title = crime.1002.name
	desc = crime.1002.desc
	picture = GFX_evt_dark_alley
	show_sound = event_criminal_activity
	location = from
	is_triggered_only = yes

	option = {
		name = UNFORTUNATE
		custom_tooltip = crime.1002.tooltip
	}
}
